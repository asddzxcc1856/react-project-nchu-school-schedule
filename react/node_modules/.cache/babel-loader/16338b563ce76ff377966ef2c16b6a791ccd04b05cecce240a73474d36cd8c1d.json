{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\dashboard\\\\react-project-nchu-school-schedule\\\\react\\\\src\\\\Register.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Register = props => {\n  _s();\n  const [Data, setData] = useState({\n    email: \"\",\n    username: \"\",\n    password: \"\",\n    check_password: \"\"\n  });\n  const handleChange1 = event => {\n    // 👇 Get input value from \"event\"\n    setData({\n      email: event.target.value,\n      username: Data.username,\n      password: Data.password,\n      check_password: Data.check_password\n    });\n  };\n  const handleChange2 = event => {\n    // 👇 Get input value from \"event\"\n    setData({\n      email: Data.email,\n      username: event.target.value,\n      password: Data.password,\n      check_password: Data.check_password\n    });\n  };\n  const handleChange3 = event => {\n    // 👇 Get input value from \"event\"\n    setData({\n      email: Data.email,\n      username: Data.username,\n      password: event.target.value,\n      check_password: Data.check_password\n    });\n  };\n  const handleChange4 = event => {\n    // 👇 Get input value from \"event\"\n    setData({\n      email: Data.email,\n      username: Data.username,\n      password: Data.password,\n      check_password: event.target.value\n    });\n  };\n  let token = localStorage.getItem(\"token\");\n  token = JSON.parse(token);\n  var url = 'https://www.axisflow.biz/practice_project/php_server/auto_login.php';\n  let obj;\n  if (token !== null) {\n    obj = {\n      key: token.data.JWT\n    };\n  } else {\n    obj = {\n      key: \"\"\n    };\n  }\n  const [ret, setRet] = useState({\n    code: 2,\n    message: \"\"\n  });\n  useEffect(() => {\n    if (ret.code === 2) {\n      async function get() {\n        await fetch(url, {\n          method: 'POST',\n          body: JSON.stringify(obj)\n        }).then(function (response) {\n          return response.json();\n        }).then(function (body) {\n          setRet(body);\n        });\n      }\n      get();\n    }\n  }, [ret.code]);\n  if (ret.code === 0) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"register-form\",\n        children: [\"\\u4FE1\\u7BB1 : \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"eamil\",\n          id: \"email\",\n          onChange: handleChange1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 96\n        }, this), \"\\u5E33\\u865F : \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          id: \"username\",\n          onChange: handleChange2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 102\n        }, this), \"\\u5BC6\\u78BC : \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          id: \"password\",\n          onChange: handleChange3\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 106\n        }, this), \"\\u78BA\\u8A8D\\u5BC6\\u78BC : \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"check-password\",\n          id: \"check-password\",\n          onChange: handleChange4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 28\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            const regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n            if (!Data.email || regex.test(Data.email) === false) {\n              alert(\"email錯誤\");\n              return;\n            }\n            if (Data.password !== Data.check_password) {\n              alert(\"密碼與確認密碼不相符\");\n              return;\n            }\n            if (Data.password.length < 6) {\n              alert(\"密碼長度至少需要6個字元\");\n              return;\n            }\n            var url = 'https://www.axisflow.biz/practice_project/php_server/register.php';\n            let obj = {\n              email: Data.email,\n              username: Data.username,\n              password: Data.password\n            };\n            fetch(url, {\n              method: 'POST',\n              body: JSON.stringify(obj)\n            }).then(function (response) {\n              if (response.status === 201) window.location.href = \"https://https://www.axisflow.biz/App/practice_project/Login\";else alert(\"email已經註冊過，註冊失敗!!\");\n            });\n          },\n          children: \"\\u8A3B\\u518A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  }\n};\n_s(Register, \"29hMze03yCZGv++cJMAqULAFWMw=\");\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","useEffect","Register","props","Data","setData","email","username","password","check_password","handleChange1","event","target","value","handleChange2","handleChange3","handleChange4","token","localStorage","getItem","JSON","parse","url","obj","key","data","JWT","ret","setRet","code","message","get","fetch","method","body","stringify","then","response","json","regex","test","alert","length","status","window","location","href"],"sources":["C:/xampp/htdocs/dashboard/react-project-nchu-school-schedule/react/src/Register.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nconst Register = (props) => {\r\n    const [Data, setData] = useState({\r\n        email: \"\",\r\n        username: \"\",\r\n        password: \"\",\r\n        check_password: \"\"\r\n    });\r\n    const handleChange1 = (event) => {\r\n        // 👇 Get input value from \"event\"\r\n        setData({\r\n            email: event.target.value,\r\n            username: Data.username,\r\n            password: Data.password,\r\n            check_password: Data.check_password\r\n        });\r\n    };\r\n    const handleChange2 = (event) => {\r\n        // 👇 Get input value from \"event\"\r\n        setData({\r\n            email: Data.email,\r\n            username: event.target.value,\r\n            password: Data.password,\r\n            check_password: Data.check_password\r\n        });\r\n    };\r\n    const handleChange3 = (event) => {\r\n        // 👇 Get input value from \"event\"\r\n        setData({\r\n            email: Data.email,\r\n            username: Data.username,\r\n            password: event.target.value,\r\n            check_password: Data.check_password\r\n        });\r\n    };\r\n    const handleChange4 = (event) => {\r\n        // 👇 Get input value from \"event\"\r\n        setData({\r\n            email: Data.email,\r\n            username: Data.username,\r\n            password: Data.password,\r\n            check_password: event.target.value\r\n        });\r\n    };\r\n    let token = localStorage.getItem(\"token\");\r\n    token = JSON.parse(token);\r\n    var url = 'https://www.axisflow.biz/practice_project/php_server/auto_login.php';\r\n    let obj\r\n    if (token !== null) {\r\n        obj = {\r\n            key: token.data.JWT,\r\n        }\r\n    }\r\n    else {\r\n        obj = {\r\n            key: \"\",\r\n        }\r\n    }\r\n\r\n    const [ret, setRet] = useState({\r\n        code: 2,\r\n        message: \"\"\r\n    });\r\n    useEffect(() => {\r\n        if (ret.code === 2) {\r\n            async function get() {\r\n                await fetch(url, {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(obj)\r\n                })\r\n                    .then(function (response) {\r\n                        return response.json();\r\n                    })\r\n                    .then(function (body) {\r\n                        setRet(body);\r\n                    });\r\n\r\n            }\r\n            get();\r\n        }\r\n    }, [ret.code]);\r\n    if (ret.code === 0) {\r\n        return (\r\n            <>\r\n                <div id=\"register-form\">\r\n                    信箱 : <input type=\"text\" name=\"eamil\" id=\"email\" onChange={handleChange1} /><br />\r\n                    帳號 : <input type=\"text\" name=\"username\" id=\"username\" onChange={handleChange2} /><br />\r\n                    密碼 : <input type=\"password\" name=\"password\" id=\"password\" onChange={handleChange3} /><br />\r\n                    確認密碼 : <input type=\"password\" name=\"check-password\" id=\"check-password\" onChange={handleChange4} />\r\n                    <button onClick={() => {\r\n                        const regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n                        if(!Data.email || regex.test(Data.email) === false){\r\n                            alert(\"email錯誤\");\r\n                            return;\r\n                        }\r\n                        if(Data.password !== Data.check_password)\r\n                        {\r\n                            alert(\"密碼與確認密碼不相符\");\r\n                            return;\r\n                        }\r\n                        if(Data.password.length < 6)\r\n                        {\r\n                            alert(\"密碼長度至少需要6個字元\");\r\n                            return;\r\n                            \r\n                        }\r\n                        var url = 'https://www.axisflow.biz/practice_project/php_server/register.php';\r\n                        let obj = {\r\n                            email: Data.email,\r\n                            username: Data.username,\r\n                            password: Data.password,\r\n                        }\r\n                        fetch(url, {\r\n                            method: 'POST',\r\n                            body: JSON.stringify(obj)\r\n                        }\r\n                        )\r\n                            .then(function (response) {\r\n                                if(response.status === 201)\r\n                                    window.location.href = \"https://https://www.axisflow.biz/App/practice_project/Login\";\r\n                                else\r\n                                    alert(\"email已經註冊過，註冊失敗!!\");\r\n                            })\r\n                    }}>註冊</button>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n    else {\r\n        return (<></>);\r\n    }\r\n}\r\n\r\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}