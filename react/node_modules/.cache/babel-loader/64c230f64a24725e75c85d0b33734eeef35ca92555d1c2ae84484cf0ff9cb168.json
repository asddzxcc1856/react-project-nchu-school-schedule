{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/dashboard/react-project-nchu-school-schedule/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/xampp/htdocs/dashboard/react-project-nchu-school-schedule/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/xampp/htdocs/dashboard/react-project-nchu-school-schedule/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */import React,{useEffect,useState}from'react';import{NavbarProvider}from'./NavbarContext';import Navbar from'./Navbar';//Navbar\nimport{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var navlink={Target1:{link:\"/Login\",item:\"登入\"},Target2:{link:\"/Register\",item:\"註冊\"}};//Navbar\nvar navlink2={Target1:{link:\"/\",item:\"系級課程\"},Target2:{link:\"/Activity\",item:\"通識\"},Target3:{link:\"/Product\",item:\"體育/全校課程\"},Target4:{link:\"/Teach\",item:\"教育學程\"}};var navlink3={Target1:{link:\"/\",item:\"\"}};var Header=function Header(props){//localStorage.clear();\nvar token=localStorage.getItem(\"token\");token=JSON.parse(token);var url='http://localhost/dashboard/react-project-nchu-school-schedule/php_server/auto_login.php';var obj;if(token!==null){obj={key:token.data.JWT};}else{obj={key:\"\"};}var _useState=useState({code:2,message:\"\"}),_useState2=_slicedToArray(_useState,2),ret=_useState2[0],setRet=_useState2[1];useEffect(function(){if(ret.code===2){var get=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url,{method:'POST',body:JSON.stringify(obj)}).then(function(response){return response.json();}).then(function(body){setRet(body);});case 2:case\"end\":return _context.stop();}},_callee);}));return function get(){return _ref.apply(this,arguments);};}();get();}else if(ret.code===0){var _get=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(url,{method:'POST',body:JSON.stringify(obj)}).then(function(response){return response.json();}).then(function(body){setRet(body);});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function _get(){return _ref2.apply(this,arguments);};}();_get();}},[ret.code,props.first]);var ob=/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{id:\"header\",children:/*#__PURE__*/_jsx(NavbarProvider,{value:navlink,children:/*#__PURE__*/_jsx(Navbar,{first:props.first})})})});var ob2=/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{id:\"header\",children:/*#__PURE__*/_jsx(NavbarProvider,{value:navlink2,children:/*#__PURE__*/_jsx(Navbar,{first:props.first})})})});var ob3=/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{id:\"header\",children:/*#__PURE__*/_jsx(NavbarProvider,{value:navlink3,children:/*#__PURE__*/_jsx(Navbar,{first:props.first})})})});if(ret.code===0)return ob;else if(ret.code===1)return ob2;else return ob3;};export default Header;","map":{"version":3,"names":["React","useEffect","useState","NavbarProvider","Navbar","navlink","Target1","link","item","Target2","navlink2","Target3","Target4","navlink3","Header","props","token","localStorage","getItem","JSON","parse","url","obj","key","data","JWT","code","message","ret","setRet","get","fetch","method","body","stringify","then","response","json","first","ob","ob2","ob3"],"sources":["C:/xampp/htdocs/dashboard/react-project-nchu-school-schedule/react/src/Header.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React ,{useEffect, useState} from 'react';\r\nimport { NavbarProvider } from './NavbarContext';\r\nimport Navbar from './Navbar';\r\n\r\n//Navbar\r\nconst navlink = {\r\n    Target1: {\r\n        link: \"/Login\",\r\n        item: \"登入\"\r\n    },\r\n    Target2: {  \r\n        link: \"/Register\",\r\n        item: \"註冊\"\r\n    }\r\n};\r\n\r\n//Navbar\r\nconst navlink2 = {\r\n    Target1: {\r\n        link: \"/\",\r\n        item: \"系級課程\"\r\n    },\r\n    Target2: {\r\n        link: \"/Activity\",\r\n        item: \"通識\"\r\n    },\r\n    Target3: {\r\n        link: \"/Product\",\r\n        item: \"體育/全校課程\"\r\n    },\r\n    Target4: {\r\n        link: \"/Teach\",\r\n        item: \"教育學程\"\r\n    },\r\n};\r\n\r\nconst navlink3 = {\r\n    Target1: {\r\n        link: \"/\",\r\n        item: \"\"\r\n    },\r\n};\r\n\r\nconst Header = (props) => {\r\n    //localStorage.clear();\r\n    let token = localStorage.getItem(\"token\");\r\n    token = JSON.parse(token);\r\n    var url = 'http://localhost/dashboard/react-project-nchu-school-schedule/php_server/auto_login.php';\r\n    let obj\r\n    if(token !== null)\r\n    {\r\n        obj = {\r\n            key: token.data.JWT,\r\n        }\r\n    }\r\n    else\r\n    {\r\n        obj = {\r\n            key: \"\",\r\n        }\r\n    }\r\n    \r\n    const [ret, setRet] = useState({\r\n        code: 2,\r\n        message: \"\"\r\n    });\r\n    useEffect(() => {\r\n        if(ret.code === 2)\r\n          {\r\n              async function get(){\r\n                  await fetch(url, {\r\n                      method: 'POST',\r\n                      body: JSON.stringify(obj)\r\n                  })\r\n                      .then(function (response) {\r\n                          return response.json();\r\n                      })\r\n                      .then(function (body) {\r\n                          setRet(body);\r\n                      });\r\n  \r\n              }\r\n              get();\r\n          }\r\n          else if (ret.code === 0)\r\n          {\r\n            async function get(){\r\n                await fetch(url, {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(obj)\r\n                })\r\n                    .then(function (response) {\r\n                        return response.json();\r\n                    })\r\n                    .then(function (body) {\r\n                        setRet(body);\r\n                    });\r\n\r\n            }\r\n            get();\r\n          }\r\n\r\n    }, [ret.code,props.first]);\r\n    \r\n    let ob = (\r\n        <>\r\n            <div id=\"header\">\r\n                <NavbarProvider value={navlink}>\r\n                    <Navbar first={props.first}></Navbar>\r\n                </NavbarProvider>\r\n            </div>\r\n        </>\r\n    );\r\n    let ob2 = (\r\n        <>\r\n            <div id=\"header\">\r\n                <NavbarProvider value={navlink2}>\r\n                    <Navbar first={props.first}></Navbar>\r\n                </NavbarProvider>\r\n            </div>\r\n        </>\r\n    );\r\n    let ob3 = (\r\n        <>\r\n            <div id=\"header\">\r\n                <NavbarProvider value={navlink3}>\r\n                    <Navbar first={props.first}></Navbar>\r\n                </NavbarProvider>\r\n            </div>\r\n        </>\r\n    );\r\n    if(ret.code === 0)\r\n        return ob;\r\n    else if(ret.code === 1)\r\n        return ob2;\r\n    else \r\n        return ob3;\r\n\r\n}\r\n\r\nexport default Header;"],"mappings":"wdAAA,gDACA,MAAOA,MAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,OAASC,cAAc,KAAQ,iBAAiB,CAChD,MAAOC,OAAM,KAAM,UAAU,CAE7B;AAAA,gGACA,GAAMC,QAAO,CAAG,CACZC,OAAO,CAAE,CACLC,IAAI,CAAE,QAAQ,CACdC,IAAI,CAAE,IACV,CAAC,CACDC,OAAO,CAAE,CACLF,IAAI,CAAE,WAAW,CACjBC,IAAI,CAAE,IACV,CACJ,CAAC,CAED;AACA,GAAME,SAAQ,CAAG,CACbJ,OAAO,CAAE,CACLC,IAAI,CAAE,GAAG,CACTC,IAAI,CAAE,MACV,CAAC,CACDC,OAAO,CAAE,CACLF,IAAI,CAAE,WAAW,CACjBC,IAAI,CAAE,IACV,CAAC,CACDG,OAAO,CAAE,CACLJ,IAAI,CAAE,UAAU,CAChBC,IAAI,CAAE,SACV,CAAC,CACDI,OAAO,CAAE,CACLL,IAAI,CAAE,QAAQ,CACdC,IAAI,CAAE,MACV,CACJ,CAAC,CAED,GAAMK,SAAQ,CAAG,CACbP,OAAO,CAAE,CACLC,IAAI,CAAE,GAAG,CACTC,IAAI,CAAE,EACV,CACJ,CAAC,CAED,GAAMM,OAAM,CAAG,QAATA,OAAM,CAAIC,KAAK,CAAK,CACtB;AACA,GAAIC,MAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzCF,KAAK,CAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CACzB,GAAIK,IAAG,CAAG,yFAAyF,CACnG,GAAIC,IAAG,CACP,GAAGN,KAAK,GAAK,IAAI,CACjB,CACIM,GAAG,CAAG,CACFC,GAAG,CAAEP,KAAK,CAACQ,IAAI,CAACC,GACpB,CAAC,CACL,CAAC,IAED,CACIH,GAAG,CAAG,CACFC,GAAG,CAAE,EACT,CAAC,CACL,CAEA,cAAsBrB,QAAQ,CAAC,CAC3BwB,IAAI,CAAE,CAAC,CACPC,OAAO,CAAE,EACb,CAAC,CAAC,wCAHKC,GAAG,eAAEC,MAAM,eAIlB5B,SAAS,CAAC,UAAM,CACZ,GAAG2B,GAAG,CAACF,IAAI,GAAK,CAAC,CACf,IACmBI,IAAG,4FAAlB,0JACUC,MAAK,CAACV,GAAG,CAAE,CACbW,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEd,IAAI,CAACe,SAAS,CAACZ,GAAG,CAC5B,CAAC,CAAC,CACGa,IAAI,CAAC,SAAUC,QAAQ,CAAE,CACtB,MAAOA,SAAQ,CAACC,IAAI,EAAE,CAC1B,CAAC,CAAC,CACDF,IAAI,CAAC,SAAUF,IAAI,CAAE,CAClBJ,MAAM,CAACI,IAAI,CAAC,CAChB,CAAC,CAAC,sDAET,kBAZcH,IAAG,2CAalBA,GAAG,EAAE,CACT,CAAC,IACI,IAAIF,GAAG,CAACF,IAAI,GAAK,CAAC,CACvB,IACiBI,KAAG,6FAAlB,gKACUC,MAAK,CAACV,GAAG,CAAE,CACbW,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEd,IAAI,CAACe,SAAS,CAACZ,GAAG,CAC5B,CAAC,CAAC,CACGa,IAAI,CAAC,SAAUC,QAAQ,CAAE,CACtB,MAAOA,SAAQ,CAACC,IAAI,EAAE,CAC1B,CAAC,CAAC,CACDF,IAAI,CAAC,SAAUF,IAAI,CAAE,CAClBJ,MAAM,CAACI,IAAI,CAAC,CAChB,CAAC,CAAC,wDAET,kBAZcH,KAAG,4CAalBA,IAAG,EAAE,CACP,CAEN,CAAC,CAAE,CAACF,GAAG,CAACF,IAAI,CAACX,KAAK,CAACuB,KAAK,CAAC,CAAC,CAE1B,GAAIC,GAAE,cACF,sCACI,YAAK,EAAE,CAAC,QAAQ,uBACZ,KAAC,cAAc,EAAC,KAAK,CAAElC,OAAQ,uBAC3B,KAAC,MAAM,EAAC,KAAK,CAAEU,KAAK,CAACuB,KAAM,EAAU,EACxB,EACf,EAEb,CACD,GAAIE,IAAG,cACH,sCACI,YAAK,EAAE,CAAC,QAAQ,uBACZ,KAAC,cAAc,EAAC,KAAK,CAAE9B,QAAS,uBAC5B,KAAC,MAAM,EAAC,KAAK,CAAEK,KAAK,CAACuB,KAAM,EAAU,EACxB,EACf,EAEb,CACD,GAAIG,IAAG,cACH,sCACI,YAAK,EAAE,CAAC,QAAQ,uBACZ,KAAC,cAAc,EAAC,KAAK,CAAE5B,QAAS,uBAC5B,KAAC,MAAM,EAAC,KAAK,CAAEE,KAAK,CAACuB,KAAM,EAAU,EACxB,EACf,EAEb,CACD,GAAGV,GAAG,CAACF,IAAI,GAAK,CAAC,CACb,MAAOa,GAAE,CAAC,IACT,IAAGX,GAAG,CAACF,IAAI,GAAK,CAAC,CAClB,MAAOc,IAAG,CAAC,IAEX,OAAOC,IAAG,CAElB,CAAC,CAED,cAAe3B,OAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}